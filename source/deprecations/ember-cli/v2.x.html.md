---
title: Deprecations for Ember CLI v2.x
alias: guides/deprecations/
layout: deprecations
---

## Deprecations Added in Ember CLI 2.x

### Deprecations Added in Ember CLI 2.3

#### An example

###### until: 3.0.0
###### id: cli.blueprints.targetObject

Providing a non-primitive value as a `defaultValue` has been deprecated because
the provided value is shared between all instances of the model. Using a
non-primitive value, such as `defaultValue: []`, can lead to unexpected bugs when
that value is mutated.

If you wish to continue using a non-primitive value as the `defaultValue` for an
attribute, you should provide a function that returns the value:

```javascript
import DS from 'ember-data';

export default DS.Model.extend({
  username: DS.attr('string'),
  createdAt: DS.attr('date', {
    defaultValue() {
      return new Date();
    }
  })
});
```

### Deprecations Added in Pending Features

#### HasManyReference.push(array)

###### until: 4.0.0
###### id: ds.references.has-many.push-array
###### feature: ds-overhaul-references

Passing an array to a `HasManyReference#push` has been deprecated. You should
refactor your code to instead pass a [JSON API Relationship
Object](http://jsonapi.org/format/#document-resource-object-relationships).

For example, if you previously had something like:

```javascript
let commentsData = [
  { data: { type: 'comment', id: 1 } },
  { data: { type: 'comment', id: 2 } }
];

let post = this.store.peekRecord('post', 123);

post.hasMany('comments').push(commentsData);
```

You could remove this deprecation by refactoring your code to:

```javascript
let commentsData = {
  data: [
    { type: 'comment', id: 1 },
    { type: 'comment', id: 2 }
  ]
};

let post = this.store.peekRecord('post', 123);

post.hasMany('comments').push(commentsData);
```
